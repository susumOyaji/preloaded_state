<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Stock Data Viewer - Realtime stock and indices tracker">
    <title>Stock Data Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="app-title">Stock Data Viewer</h1>
            <div class="header-actions">
                <button id="refreshBtn" class="icon-btn" title="Refresh">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                        fill="currentColor">
                        <path
                            d="M480-160q-134 0-227-93t-93-227q0-134 93-227t227-93q69 0 132 28.5T720-690v-110h80v280H520v-80h168q-38-77-113-123.5T480-720q-100 0-170 70t-70 170q0 100 70 170t170 70q77 0 147.5-45.5T707-300l72 26q-33 89-111.5 161.5T480-160Z" />
                    </svg>
                </button>
                <button id="addStockBtn" class="icon-btn" title="Add Stock">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                        fill="currentColor">
                        <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
                    </svg>
                </button>
                <button id="settingsBtn" class="icon-btn" title="Settings">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                        fill="currentColor">
                        <path
                            d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-1 13.5l103 78-110 190-119-50q-11 8-23 15t-24 12l-16 128H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-58 0-99 41t-41 99q0 58 41 99t99 41Z" />
                    </svg>
                </button>
            </div>
        </header>

        <!-- Market Indices Section -->
        <section>
            <h2 class="section-title">Market Indices</h2>
            <div id="indicesContainer" class="indices-grid">
                <!-- Indices cards will be injected here -->
                <div class="stock-card" style="justify-content: center; align-items: center; color: var(--outline);">
                    Loading...
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section class="portfolio-section">
            <h2 class="section-title">Portfolio</h2>
            <div class="portfolio-card">
                <div style="font-size: 1rem; opacity: 0.8;">Total Asset Value</div>
                <div id="totalAssetValue" class="portfolio-value">¥0</div>
                <div id="totalGainLoss" class="portfolio-gain text-neutral">
                    <span>¥0 (0.00%)</span>
                </div>
            </div>
        </section>

        <!-- Watchlist Section -->
        <section>
            <h2 class="section-title">Watchlist</h2>
            <div id="watchlistContainer">
                <!-- Watchlist cards will be injected here -->
            </div>
            <div id="emptyState" class="empty-state hidden"
                style="text-align: center; padding: 40px; color: var(--outline);">
                <p>No stocks in watchlist.</p>
                <p>Click + to add stocks.</p>
            </div>
        </section>
    </div>

    <!-- Add Stock Modal -->
    <div id="addStockModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle" class="modal-title">Add Stock</h3>
            <div class="form-group">
                <label
                    style="display:block; margin-bottom:4px; font-size:0.875rem; color:var(--on-surface-variant);">Code</label>
                <input type="text" id="stockInput" class="input-field" placeholder="e.g. 7203.T" autofocus>
            </div>
            <div class="form-group">
                <label
                    style="display:block; margin-bottom:4px; font-size:0.875rem; color:var(--on-surface-variant);">Broker
                    (Optional)</label>
                <input type="text" id="brokerInput" class="input-field" placeholder="e.g. SBI, Rakuten">
            </div>
            <div class="form-group">
                <label
                    style="display:block; margin-bottom:4px; font-size:0.875rem; color:var(--on-surface-variant);">Quantity</label>
                <input type="number" id="quantityInput" class="input-field" placeholder="0" min="0">
            </div>
            <div class="form-group">
                <label
                    style="display:block; margin-bottom:4px; font-size:0.875rem; color:var(--on-surface-variant);">Avg
                    Price</label>
                <input type="number" id="priceInput" class="input-field" placeholder="0" min="0">
            </div>
            <div class="modal-actions">
                <button id="cancelAddBtn" class="btn btn-text">Cancel</button>
                <button id="confirmAddBtn" class="btn btn-filled">Save</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Settings</h3>
            <div class="form-group">
                <label style="display:block; margin-bottom:8px;">API Endpoint</label>
                <input type="text" id="apiEndpoint" class="input-field">
            </div>
            <div class="form-group">
                <label style="display:block; margin-bottom:8px;">Refresh Interval (sec)</label>
                <input type="number" id="refreshInterval" class="input-field" min="10" max="300">
            </div>
            <div class="form-group">
                <label style="display:flex; align-items:center; gap:8px;">
                    <input type="checkbox" id="themeToggle"> Dark Mode
                </label>
            </div>
            <div class="modal-actions">
                <button id="cancelSettings" class="btn btn-text">Cancel</button>
                <button id="saveSettings" class="btn btn-filled">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Message</div>

    <script src="app.js"></script>
</body>

</html>